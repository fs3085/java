**同步机制中的锁** 

- **同步锁机制：**

在《Thinking in Java》中，是这么说的：对于并发工作，你需要某种方式来防

止两个任务访问相同的资源（其实就是共享资源竞争）。 防止这种冲突的方法

就是当资源被一个任务使用时，在其上加锁。第一个访问某项资源的任务必须

锁定这项资源，使其他任务在其被解锁之前，就无法访问它了，而在其被解锁

之时，另一个任务就可以锁定并使用它了。 

- **synchronized的锁是什么？** 

  - 任意对象都可以作为同步锁。所有对象都自动含有单一的锁（监视器）。 

  - 同步方法的锁：静态方法（类名.class）、非静态方法（this）  

  - 同步代码块：自己指定，很多时候也是指定为this或类名.class

- **注意：**

  - 必须确保使用同一个资源的**多个线程共用一把锁**，这个非常重要，否则就

    无法保证共享资源的安全

  - 一个线程类中的所有静态方法共用同一把锁（类名.class），所有非静态方

    法共用同一把锁（this），同步代码块（指定需谨慎）

    

**释放锁的操作**

- 当前线程的同步方法、同步代码块执行结束。

- 当前线程在同步代码块、同步方法中遇到break、return终止了该代码块、

  该方法的继续执行。

- 当前线程在同步代码块、同步方法中出现了未处理的Error或Exception，导

  致异常结束。

- 当前线程在同步代码块、同步方法中执行了线程对象的**wait()**方法，当前线

  程暂停，并释放锁。